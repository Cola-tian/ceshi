{"version":3,"file":"js/297.3bdb8919.js","mappings":"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","sources":["webpack://hmmm-frontend-vue3-dev/./src/api/base/permissions.js","webpack://hmmm-frontend-vue3-dev/./src/module-manage/components/permissionsApi-add.vue","webpack://hmmm-frontend-vue3-dev/./src/module-manage/components/permissionsApi-add.vue?1c99"],"sourcesContent":["import { createAPI } from '@/utils/request'\r\n\r\nexport const list = (data) => createAPI('/permissions', 'get', data)\r\nexport const simple = (data) => createAPI('/permissions/simple', 'get', data)\r\nexport const add = (data) => createAPI('/permissions', 'post', data)\r\nexport const update = (data) =>\r\n  createAPI(`/permissions/${data.id}`, 'put', data)\r\nexport const remove = (data) =>\r\n  createAPI(`/permissions/${data.id}`, 'delete', data)\r\nexport const detail = (data) =>\r\n  createAPI(`/permissions/${data.id}`, 'get', data)\r\n","<template>\r\n  <div class=\"add-form\">\r\n    <el-dialog :title=\"apiTitle\" v-model=\"dialogFormVisible\">\r\n      <el-form\r\n        :rules=\"ruleInline\"\r\n        ref=\"dataForm\"\r\n        :model=\"formBase\"\r\n        label-position=\"left\"\r\n        label-width=\"120px\"\r\n        style=\"width: 400px; margin-left: 120px\"\r\n      >\r\n        <el-form-item :label=\"$t('table.powerTitle')\" prop=\"title\">\r\n          <el-input v-model=\"formBase.title\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item :label=\"$t('table.powerDistriB')\">\r\n          <el-tree\r\n            ref=\"treeMenu\"\r\n            :data=\"treeData\"\r\n            show-checkbox\r\n            node-key=\"id\"\r\n            :default-expanded-keys=\"[0]\"\r\n            :props=\"defaultProps\"\r\n            @check-change=\"handleCheckChange\"\r\n          >\r\n          </el-tree>\r\n        </el-form-item>\r\n      </el-form>\r\n      <template v-slot:footer>\r\n        <div class=\"dialog-footer\">\r\n          <el-button @click=\"handleClose\">{{ $t('table.signOut') }}</el-button>\r\n          <el-button type=\"primary\" @click=\"handleSave('formBase')\">{{\r\n            $t('table.preserve')\r\n          }}</el-button>\r\n        </div>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { $on, $off, $once, $emit } from '../../utils/gogocodeTransfer'\r\nimport { detail, update, add } from '@/api/base/permissions'\r\nimport { list } from '@/api/base/menus.js'\r\nlet _this = []\r\nexport default {\r\n  name: 'PermissionGroupsApiAdd',\r\n  props: ['apiTitle', 'ruleInline'],\r\n  data () {\r\n    return {\r\n      dialogFormVisible: false,\r\n      PermissionGroupsmenu: [],\r\n      defaultProps: {\r\n        label: 'title'\r\n      },\r\n      formBase: {\r\n        id: 0,\r\n        title: '',\r\n        apis: []\r\n      },\r\n      PermissionApiData: [],\r\n      checkedData: []\r\n    }\r\n  },\r\n  computed: {\r\n    // 菜单权限树\r\n    treeData () {\r\n      const checkedData = this.PermissionApiData\r\n\r\n      const checked = false\r\n      if (_this !== null && _this.formBase.apis.length > 0) {\r\n        const per = _this.formBase.apis.map((item) => {\r\n          return item\r\n        })\r\n        const use = per.map((item) => {\r\n          checkedData.filter((mini) => {\r\n            if (mini.id === item) {\r\n              mini.checked = true\r\n            }\r\n            return undefined\r\n          })\r\n          return undefined\r\n        })\r\n      }\r\n      return checkedData\r\n    }\r\n  },\r\n  methods: {\r\n    // 逻辑业务\r\n    // **********************************\r\n    // **********************************\r\n    // 弹层显示\r\n    dialogFormV () {\r\n      this.dialogFormVisible = true\r\n    },\r\n    // 弹层隐藏\r\n    dialogFormH () {\r\n      this.dialogFormVisible = false\r\n    },\r\n    // 退出\r\n    handleClose () {\r\n      $emit(this, 'handleCloseModal')\r\n    },\r\n    // 节点复选框被选中\r\n    handleCheckChange (nodes) {\r\n      const checkedData = []\r\n      checkedData.push(nodes)\r\n    },\r\n    // 高级接口数据列表\r\n    loadApiPermissionData () {\r\n      list().then((ret, err) => {\r\n        if (err) {\r\n          return err\r\n        }\r\n        _this.PermissionApiData = ret.data\r\n      })\r\n    },\r\n    // 高级接口表单详情数据加载\r\n    hanldeEditApiForm (objeditId) {\r\n      // 获取权限标题\r\n      this.formBase.id = objeditId\r\n      // eslint-disable-next-line no-undef\r\n      details({ id: objeditId }).then((ret, err) => {\r\n        if (err) {\r\n          return err\r\n        }\r\n        this.formBase.id = ret.data.id\r\n        this.formBase.title = ret.data.title\r\n      })\r\n      _this.loadApiPermissionData()\r\n      // 读取授权\r\n      // eslint-disable-next-line no-undef\r\n      apiread({ id: objeditId }).then((ret, err) => {\r\n        if (err) {\r\n          return err\r\n        }\r\n        this.formBase.apis = ret.data.apis\r\n      })\r\n    },\r\n    // 表单提交\r\n    handleSave (object) {\r\n      const curApis = []\r\n      for (const it of _this.checkedData) {\r\n        curApis.push(it.id)\r\n      }\r\n      this.$refs[object].validate((valid) => {\r\n        if (valid) {\r\n          $emit(this, 'handleCloseModal')\r\n          // eslint-disable-next-line no-undef\r\n          apiadd({ id: _this.formBase.id, apis: curApis }).then((ret, err) => {\r\n            if (err) {\r\n              return err\r\n            }\r\n            $emit(this, 'newDataes', this.formBase)\r\n          })\r\n        } else {\r\n          this.$Message.error('*号为必填项!')\r\n        }\r\n      })\r\n    }\r\n  },\r\n  // 挂载结束\r\n  mounted: function () {},\r\n  // 创建完毕状态\r\n  created () {\r\n    _this = this\r\n  },\r\n  // 组件更新\r\n  updated: function () {},\r\n  emits: ['newDataes', 'handleCloseModal']\r\n}\r\n</script>\r\n\r\n<style>\r\n.el-tree {\r\n  margin-top: 8px;\r\n}\r\n.el-tree-node__content {\r\n  height: auto;\r\n}\r\n.el-form--label-left .el-form-item__label {\r\n  text-align: right;\r\n}\r\n.el-dialog__footer {\r\n  text-align: right;\r\n}\r\n</style>\r\n","import { render } from \"./permissionsApi-add.vue?vue&type=template&id=5fa7732e\"\nimport script from \"./permissionsApi-add.vue?vue&type=script&lang=js\"\nexport * from \"./permissionsApi-add.vue?vue&type=script&lang=js\"\n\nimport \"./permissionsApi-add.vue?vue&type=style&index=0&id=5fa7732e&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["list","data","createAPI","simple","add","update","id","remove","detail","class","_createElementBlock","_hoisted_1","_createVNode","_component_el_dialog","title","$props","apiTitle","$data","dialogFormVisible","$event","footer","_withCtx","_createElementVNode","_hoisted_2","_component_el_button","onClick","$options","handleClose","_ctx","$t","type","_cache","handleSave","_component_el_form","rules","ruleInline","ref","model","formBase","style","_component_el_form_item","label","prop","_component_el_input","_component_el_tree","treeData","props","defaultProps","onCheckChange","handleCheckChange","_this","name","PermissionGroupsmenu","apis","PermissionApiData","checkedData","computed","this","length","per","map","item","filter","mini","checked","methods","dialogFormV","dialogFormH","$emit","nodes","push","loadApiPermissionData","then","ret","err","hanldeEditApiForm","objeditId","details","apiread","object","curApis","it","$refs","validate","valid","apiadd","$Message","error","mounted","created","updated","emits","__exports__","render"],"sourceRoot":""}