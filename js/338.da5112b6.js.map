{"version":3,"file":"js/338.da5112b6.js","mappings":"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","sources":["webpack://hmmm-frontend-vue3-dev/./src/components/TreeTable/utils/dataTranslate.js","webpack://hmmm-frontend-vue3-dev/./src/module-manage/components/menu-add.vue","webpack://hmmm-frontend-vue3-dev/./src/module-manage/components/menu-add.vue?0bdf"],"sourcesContent":["import * as Vue from 'vue'\r\nfunction DataTransfer (data) {\r\n  if (!(this instanceof DataTransfer)) {\r\n    return new DataTransfer(data, null, null)\r\n  }\r\n}\r\n\r\nDataTransfer.treeToArray = function (data, parent, level, expandedAll) {\r\n  let tmp = []\r\n  Array.from(data).forEach(function (record) {\r\n    if (record._expanded === undefined) {\r\n      record._expanded = expandedAll\r\n    }\r\n    if (parent) {\r\n      record._parent = parent\r\n    }\r\n    let _level = 0\r\n    if (level !== undefined && level !== null) {\r\n      _level = level + 1\r\n    }\r\n    record._level = _level\r\n    tmp.push(record)\r\n    if (record.childs && record.childs.length > 0) {\r\n      const childs = DataTransfer.treeToArray(\r\n        record.childs,\r\n        record,\r\n        _level,\r\n        expandedAll\r\n      )\r\n      tmp = tmp.concat(childs)\r\n    }\r\n    if (record.points && record.points.length > 0) {\r\n      const points = DataTransfer.treeToArray(\r\n        record.points,\r\n        record,\r\n        _level,\r\n        expandedAll\r\n      )\r\n      tmp = tmp.concat(points)\r\n    }\r\n  })\r\n  return tmp\r\n}\r\n\r\nexport default DataTransfer\r\n","<template>\r\n  <div class=\"add-form\">\r\n    <el-dialog :title=\"text + pageTitle\" v-model=\"dialogFormVisible\">\r\n      <el-form\r\n        :rules=\"ruleInline\"\r\n        ref=\"formMenu\"\r\n        :model=\"formMenu\"\r\n        label-position=\"left\"\r\n        label-width=\"120px\"\r\n        style=\"width: 400px; margin-left: 120px\"\r\n      >\r\n        <el-form-item :label=\"$t('table.permissionUser')\">\r\n          <el-radio-group\r\n            v-model=\"type\"\r\n            class=\"choose-type\"\r\n            @change=\"handleChooseType\"\r\n          >\r\n            <el-radio label=\"menu\" class=\"choose-item\" :disabled=\"typeStatus\"\r\n              >菜单</el-radio\r\n            >\r\n            <el-radio label=\"points\" class=\"choose-item\" :disabled=\"typeStatus\"\r\n              >权限点</el-radio\r\n            >\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item :label=\"$t('table.permissionUser')\">\r\n          <el-select v-model=\"formMenu.pid\">\r\n            <el-option :value=\"0\" :label=\"$t('table.powerNav')\"\r\n              >主导航</el-option\r\n            >\r\n            <el-option\r\n              v-for=\"items in notPointDataList\"\r\n              :value=\"items.id\"\r\n              :key=\"items.id\"\r\n              :label=\"items.title\"\r\n              :disabled=\"type === 'points' && !!items.childs\"\r\n              :class=\"'moveIn' + items.layer\"\r\n            >\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <div v-if=\"showMenuBlock\">\r\n          <el-form-item :label=\"$t('table.powerCode')\" prop=\"code\">\r\n            <el-input v-model=\"formMenu.code\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item :label=\"$t('table.powerTitle')\" prop=\"title\">\r\n            <el-input v-model=\"formMenu.title\"></el-input>\r\n          </el-form-item>\r\n        </div>\r\n        <div v-if=\"showPointBlock\" :model=\"formPoints\">\r\n          <el-form-item :label=\"$t('table.powerCode')\" prop=\"code\">\r\n            <el-input v-model=\"formPoints.code\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item :label=\"$t('table.powerTitle')\" prop=\"title\">\r\n            <el-input v-model=\"formPoints.title\"></el-input>\r\n          </el-form-item>\r\n        </div>\r\n      </el-form>\r\n      <template v-slot:footer>\r\n        <div class=\"dialog-footer\">\r\n          <el-button @click=\"handleClose\">{{ $t('table.cancel') }}</el-button>\r\n          <el-button type=\"primary\" @click=\"handleSubmit('formMenu')\">{{\r\n            $t('table.confirm')\r\n          }}</el-button>\r\n        </div>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { $on, $off, $once, $emit } from '../../utils/gogocodeTransfer'\r\nimport { list, detail, update, add } from '@/api/base/menus'\r\nimport Utils from '@/components/TreeTable/utils/dataTranslate.js'\r\nlet _this = []\r\nexport default {\r\n  name: 'items',\r\n  // props: ['text', 'pageTitle', 'PermissionGroupsList',],\r\n  props: {\r\n    treeStructure: {\r\n      type: Boolean,\r\n      default: function () {\r\n        return false\r\n      }\r\n    },\r\n    // 这个是是否展示操作列\r\n    text: {\r\n      type: String\r\n    },\r\n    pageTitle: {\r\n      type: String\r\n    },\r\n    PermissionGroupsList: {\r\n      type: Array\r\n    }\r\n  },\r\n  data () {\r\n    const validateCode = (rule, value, callback) => {\r\n      const thisCode = _this.formMenu.code\r\n      if (value === '') {\r\n        callback(new Error('代码不能为空'))\r\n      } else {\r\n        validateCode.ifHave = false\r\n        const thisPid = _this.formMenu.pid\r\n        validateCode.ifHaveCodeExciting = function (oldList) {\r\n          for (let i = 0; i < oldList.length; i++) {\r\n            if (oldList[i].childs && oldList[i].childs.length > 0) {\r\n              validateCode.ifHaveCodeExciting(oldList[i].childs)\r\n            }\r\n            if (oldList[i].points && oldList[i].points.length > 0) {\r\n              if (oldList[i].id === thisPid) {\r\n                validateCode.doPoints(oldList[i].points)\r\n              }\r\n            }\r\n          }\r\n        }\r\n        validateCode.doPoints = function (points) {\r\n          for (let i = 0; i < points.length; i++) {\r\n            if (points[i].code && points[i].code === thisCode) {\r\n              validateCode.ifHave = true\r\n            }\r\n          }\r\n        }\r\n        validateCode.ifHaveCodeExciting(_this.parentDataList)\r\n        callback()\r\n        // if (validateCode.ifHave) {\r\n        //   callback(new Error('此代码已存在，不能添加相同的！！'))\r\n        // } else {\r\n        //   callback()\r\n        // }\r\n      }\r\n    }\r\n    return {\r\n      type: 'menu',\r\n      showMenuBlock: true,\r\n      showPointBlock: false,\r\n      dialogFormVisible: false,\r\n      typeStatus: false,\r\n      notPointDataList: [],\r\n      parentDataList: [],\r\n      formMenu: {\r\n        pid: '', // 父级Id\r\n        is_point: '', // 是否权限点\r\n        code: '', // 菜单代码\r\n        title: '' // 标题\r\n      },\r\n      formPoints: {\r\n        pid: '', // 父级Id\r\n        is_point: '', // 是否权限点\r\n        code: '', // 菜单代码\r\n        title: '' // 标题\r\n      },\r\n      codepast: '',\r\n      ruleInline: {\r\n        title: [{ required: true, message: '标题不能为空', trigger: 'blur' }],\r\n        code: [{ required: true, validator: validateCode, trigger: 'blur' }]\r\n      },\r\n      leafCount: []\r\n    }\r\n  },\r\n  computed: {},\r\n  methods: {\r\n    // 弹层显示\r\n    dialogFormV () {\r\n      this.dialogFormVisible = true\r\n    },\r\n    // 弹层隐藏\r\n    dialogFormH () {\r\n      this.dialogFormVisible = false\r\n    },\r\n    handleChooseType () {\r\n      if (this.type === 'menu') {\r\n        _this.changeToMenu()\r\n      }\r\n      if (this.type === 'points') {\r\n        _this.changeToPoints()\r\n      }\r\n    },\r\n    changeType (flag) {\r\n      if (flag === 'menu') {\r\n        this.type = 'menu'\r\n        _this.changeToMenu()\r\n      }\r\n      if (flag === 'points') {\r\n        this.type = 'points'\r\n        _this.changeToPoints()\r\n      }\r\n      this.typeStatus = true\r\n    },\r\n    changeArays () {\r\n      const changeAray = (oldArray) => {\r\n        for (let i = 0; i < oldArray.length; i++) {\r\n          // 数据没有code并且没有子元素时\r\n          if (oldArray[i].code !== undefined) {\r\n            _this.notPointDataList.push(oldArray[i])\r\n          }\r\n          // 数据有子元素时\r\n          if (oldArray[i].childs && oldArray[i].childs.length > 0) {\r\n            changeAray(oldArray[i].childs)\r\n          }\r\n        }\r\n      }\r\n      changeAray(_this.parentDataList)\r\n    },\r\n    changeToMenu () {\r\n      _this.showMenuBlock = true\r\n      _this.showPointBlock = false\r\n      _this.notPointDataList = []\r\n      this.changeArays()\r\n    },\r\n    changeToPoints () {\r\n      _this.showMenuBlock = false\r\n      _this.showPointBlock = true\r\n      _this.formMenu = _this.formPoints\r\n      _this.formMenu.pid = _this.formPoints.pid\r\n      _this.formMenu.code = _this.formPoints.code\r\n      _this.formMenu.title = _this.formPoints.title\r\n      _this.notPointDataList = []\r\n      this.changeArays()\r\n    },\r\n    // 退出\r\n    handleClose () {\r\n      $emit(this, 'handleCloseModal')\r\n    },\r\n    // 菜单和权限点选择：编辑\r\n    handle_Edit (object) {\r\n      update(this.formMenu).then(() => {\r\n        $emit(this, 'handleCloseModal')\r\n        $emit(this, 'newDataes', this.formMenu)\r\n      })\r\n    },\r\n    // 菜单和权限点选择：添加\r\n    select_Add () {\r\n      add(this.formMenu).then(() => {\r\n        _this.handleResetForm()\r\n        // _this.type = 'menu'\r\n        $emit(this, 'handleCloseModal')\r\n        $emit(this, 'newDataes', this.formMenu)\r\n      })\r\n    },\r\n    handle_Add (object) {\r\n      if (_this.type === 'points') {\r\n        this.formMenu.is_point = true\r\n        this.select_Add()\r\n      } else {\r\n        this.formMenu.is_point = false\r\n        this.select_Add()\r\n      }\r\n    },\r\n    // 表单提交\r\n    handleSubmit (object) {\r\n      _this.formMenu.pid = Number(_this.formMenu.pid)\r\n      if (_this.formMenu.id) {\r\n        const thisCode = _this.formMenu.code // 输入的code值\r\n        if (thisCode === this.codepast) {\r\n          // Code不变\r\n          this.$refs.formMenu.validateField('title')\r\n          _this.handle_Edit(object)\r\n        } else {\r\n          // Code变化\r\n          _this.$refs[object].validate((valid) => {\r\n            if (valid) {\r\n              _this.handle_Edit(object)\r\n            } else {\r\n              this.$Message.error('表单验证失败')\r\n            }\r\n          })\r\n        }\r\n      } else {\r\n        _this.$refs[object].validate((valid) => {\r\n          if (valid) {\r\n            _this.handle_Add(object)\r\n          } else {\r\n            this.$Message.error('表单验证失败')\r\n          }\r\n        })\r\n      }\r\n    },\r\n    // 表单详情\r\n    dataRest (obj) {\r\n      for (let i = 0; i < obj.length; i++) {\r\n        if (obj[i].childs && obj[i].childs.length > 0) {\r\n          for (let j = 0; j < obj[i].childs.length; j++) {\r\n            obj[i].childs[j].layer = 1\r\n          }\r\n        }\r\n\r\n        obj[i].layer = 0\r\n      }\r\n    },\r\n    hanldeEditForm (objeditId) {\r\n      this.formMenu.id = objeditId\r\n      list().then((data) => {\r\n        _this.parentDataList = data.data\r\n        _this.notPointDataList = []\r\n        this.dataRest(data.data)\r\n        this.changeArays()\r\n      })\r\n      detail({ id: objeditId }).then((data) => {\r\n        this.formMenu.id = data.data.id\r\n        this.formMenu.pid = data.data.pid\r\n        this.formMenu.title = data.data.title\r\n        this.formMenu.code = data.data.code\r\n        this.formMenu.is_point = data.data.is_point\r\n        const responseData = data.data\r\n        const choose = this.type\r\n        if (choose === 'points') {\r\n          this.formMenu.code = data.data.code\r\n        }\r\n        if (responseData.pid === null) {\r\n          this.formMenu.pid = 0\r\n        }\r\n      })\r\n    },\r\n    // 表单重置\r\n    handleResetForm () {\r\n      this.formMenu.id = ''\r\n      this.formMenu.pid = 0\r\n      this.formMenu.title = ''\r\n      this.formMenu.code = ''\r\n      _this.typeStatus = false\r\n      _this.type = 'menu'\r\n      list().then((data) => {\r\n        _this.parentDataList = data.data\r\n        _this.notPointDataList = _this.parentDataList\r\n        this.dataRest(data.data)\r\n        _this.changeToMenu()\r\n      })\r\n    }\r\n  },\r\n  // 挂载结束\r\n  mounted: function () {},\r\n  // 创建完毕状态\r\n  created () {\r\n    _this = this\r\n  },\r\n  // 组件更新\r\n  updated: function () {},\r\n  emits: ['newDataes', 'handleCloseModal']\r\n}\r\n</script>\r\n\r\n<style>\r\n.el-form--label-left .el-form-item__label {\r\n  text-align: right;\r\n}\r\n.el-dialog__footer {\r\n  text-align: right;\r\n}\r\n.moveIn0 {\r\n  text-indent: 14px;\r\n}\r\n.moveIn1 {\r\n  text-indent: 28px;\r\n}\r\n</style>\r\n\r\n<style lang=\"scss\" scoped>\r\n.el-fade-in-linear-enter-active,\r\n.el-fade-in-linear-leave-active,\r\n.fade-in-linear-enter-active,\r\n.fade-in-linear-leave-active {\r\n  transition: opacity 0.2s linear;\r\n}\r\n\r\n.el-fade-in-enter,\r\n.el-fade-in-leave-active,\r\n.el-fade-in-linear-enter,\r\n.el-fade-in-linear-leave,\r\n.el-fade-in-linear-leave-active,\r\n.fade-in-linear-enter,\r\n.fade-in-linear-leave,\r\n.fade-in-linear-leave-active {\r\n  opacity: 0;\r\n}\r\n\r\n.select-search {\r\n  a {\r\n    color: #333;\r\n    text-decoration: none;\r\n    padding: 5px;\r\n  }\r\n  ul {\r\n    list-style: none;\r\n    padding: 6px 0;\r\n    margin: 0;\r\n    overflow: visible;\r\n    li {\r\n      display: block;\r\n      width: 100%;\r\n      padding: 5px;\r\n      font-size: 14px;\r\n      padding: 8px 10px;\r\n      position: relative;\r\n      white-space: nowrap;\r\n      overflow: hidden;\r\n      text-overflow: ellipsis;\r\n      color: #48576a;\r\n      height: 36px;\r\n      line-height: 1.5;\r\n      box-sizing: border-box;\r\n      cursor: pointer;\r\n      &.active {\r\n        background-color: #20a0ff;\r\n        a {\r\n          color: #fff;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .select-header {\r\n    position: relative;\r\n    border-radius: 4px;\r\n    border: 1px solid #bfcbd9;\r\n    outline: 0;\r\n    padding: 0 8px;\r\n    > input {\r\n      border: none;\r\n      -webkit-appearance: none;\r\n      -moz-appearance: none;\r\n      appearance: none;\r\n      width: 100%;\r\n      outline: 0;\r\n      box-sizing: border-box;\r\n      color: #1f2d3d;\r\n      font-size: inherit;\r\n      height: 36px;\r\n      line-height: 1;\r\n    }\r\n    > i {\r\n      transition: all 0.3s linear;\r\n      display: inline-block;\r\n      position: absolute;\r\n      right: 3%;\r\n      top: 50%;\r\n      transform: translateY(-50%);\r\n    }\r\n  }\r\n  .select-body {\r\n    z-index: 1000;\r\n    border-radius: 2px;\r\n    background-color: #fff;\r\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.12), 0 0 6px rgba(0, 0, 0, 0.04);\r\n    box-sizing: border-box;\r\n    margin: 5px 0;\r\n    padding: 8px;\r\n    > input {\r\n      -webkit-appearance: none;\r\n      -moz-appearance: none;\r\n      appearance: none;\r\n      background-color: #fff;\r\n      background-image: none;\r\n      border-radius: 4px;\r\n      border: 1px solid #bfcbd9;\r\n      box-sizing: border-box;\r\n      color: #1f2d3d;\r\n      font-size: inherit;\r\n      height: 36px;\r\n      line-height: 1;\r\n      outline: 0;\r\n      padding: 3px 10px;\r\n      transition: border-color 0.2s cubic-bezier(0.645, 0.045, 0.355, 1);\r\n      width: 100%;\r\n      display: inline-block;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./menu-add.vue?vue&type=template&id=70010ac8&scoped=true\"\nimport script from \"./menu-add.vue?vue&type=script&lang=js\"\nexport * from \"./menu-add.vue?vue&type=script&lang=js\"\n\nimport \"./menu-add.vue?vue&type=style&index=0&id=70010ac8&lang=css\"\nimport \"./menu-add.vue?vue&type=style&index=1&id=70010ac8&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-70010ac8\"]])\n\nexport default __exports__"],"names":["DataTransfer","data","this","treeToArray","parent","level","expandedAll","tmp","Array","from","forEach","record","undefined","_expanded","_parent","_level","push","childs","length","concat","points","class","_createElementBlock","_hoisted_1","_createVNode","_component_el_dialog","title","$props","text","pageTitle","$data","dialogFormVisible","$event","footer","_withCtx","_createElementVNode","_hoisted_4","_component_el_button","onClick","$options","handleClose","_ctx","$t","type","_cache","handleSubmit","_component_el_form","rules","ruleInline","ref","model","formMenu","style","_component_el_form_item","label","_component_el_radio_group","onChange","handleChooseType","_component_el_radio","disabled","typeStatus","_component_el_select","pid","_component_el_option","value","_Fragment","_renderList","notPointDataList","items","_createBlock","id","key","_normalizeClass","layer","showMenuBlock","_hoisted_2","prop","_component_el_input","code","showPointBlock","formPoints","_this","name","props","treeStructure","Boolean","default","String","PermissionGroupsList","validateCode","rule","callback","thisCode","Error","ifHave","thisPid","ifHaveCodeExciting","oldList","i","doPoints","parentDataList","is_point","codepast","required","message","trigger","validator","leafCount","computed","methods","dialogFormV","dialogFormH","changeToMenu","changeToPoints","changeType","flag","changeArays","changeAray","oldArray","$emit","handle_Edit","object","update","then","select_Add","add","handleResetForm","handle_Add","Number","$refs","validateField","validate","valid","$Message","error","dataRest","obj","j","hanldeEditForm","objeditId","list","detail","responseData","choose","mounted","created","updated","emits","__exports__","render"],"sourceRoot":""}