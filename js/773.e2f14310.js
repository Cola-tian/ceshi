"use strict";(self["webpackChunkhmmm_frontend_vue3_dev"]=self["webpackChunkhmmm_frontend_vue3_dev"]||[]).push([[773,979,214],{8720:function(e,a,t){t.d(a,{IH:function(){return i},Od:function(){return n},Vx:function(){return o},lA:function(){return d},lC:function(){return s},pb:function(){return r}});var l=t(84471);const r=e=>(0,l.r)("/permissions","get",e),s=e=>(0,l.r)("/permissions/simple","get",e),i=e=>(0,l.r)("/permissions","post",e),o=e=>(0,l.r)(`/permissions/${e.id}`,"put",e),n=e=>(0,l.r)(`/permissions/${e.id}`,"delete",e),d=e=>(0,l.r)(`/permissions/${e.id}`,"get",e)},59790:function(e,a,t){t.d(a,{IH:function(){return i},Od:function(){return n},Vx:function(){return o},lA:function(){return d},lC:function(){return s},pb:function(){return r}});var l=t(84471);const r=e=>(0,l.r)("/users/","get",e),s=e=>(0,l.r)("/users/simple","get",e),i=e=>(0,l.r)("/users","post",e),o=e=>(0,l.r)(`/users/${e.id}`,"put",e),n=e=>(0,l.r)(`/users/${e.id}`,"delete",e),d=e=>(0,l.r)(`/users/${e.id}`,"get",e)},8979:function(e,a,t){t.r(a),t.d(a,{default:function(){return u}});var l=t(73396);const r={class:"pages"};function s(e,a,t,s,i,o){const n=(0,l.up)("el-pagination");return(0,l.wg)(),(0,l.iD)("div",r,[(0,l.Wm)(n,{background:"",onSizeChange:o.onPageSizeChange,onCurrentChange:o.onPageChange,"current-page":Number(t.paginationPage),total:Number(t.total),"page-size":Number(t.paginationPagesize),"page-sizes":[10,20,30,50],layout:"sizes, prev, pager, next, jumper"},null,8,["onSizeChange","onCurrentChange","current-page","total","page-size"])])}var i=t(19471),o={name:"PageTool",props:["total","paginationPage","paginationPagesize"],data(){return{}},methods:{onPageChange:function(e){(0,i.Qy)(this,"pageChange",e)},onPageSizeChange:function(e){(0,i.Qy)(this,"pageSizeChange",e)}},emits:["pageChange","pageSizeChange"]},n=t(40089);const d=(0,n.Z)(o,[["render",s]]);var u=d},51214:function(e,a,t){t.r(a),t.d(a,{default:function(){return h}});var l=t(73396),r=t(87139);const s={class:"add-form"},i={class:"dialog-footer"};function o(e,a,t,o,n,d){const u=(0,l.up)("el-input"),m=(0,l.up)("el-form-item"),p=(0,l.up)("el-option"),h=(0,l.up)("el-select"),g=(0,l.up)("el-form"),c=(0,l.up)("el-button"),f=(0,l.up)("el-dialog");return(0,l.wg)(),(0,l.iD)("div",s,[(0,l.Wm)(f,{title:t.text+t.pageTitle,modelValue:n.dialogFormVisible,"onUpdate:modelValue":a[7]||(a[7]=e=>n.dialogFormVisible=e)},{footer:(0,l.w5)((()=>[(0,l._)("div",i,[(0,l.Wm)(c,{onClick:d.handleClose},{default:(0,l.w5)((()=>[(0,l.Uk)((0,r.zw)(e.$t("table.cancel")),1)])),_:1},8,["onClick"]),(0,l.Wm)(c,{type:"primary",onClick:d.createData},{default:(0,l.w5)((()=>[(0,l.Uk)((0,r.zw)(e.$t("table.confirm")),1)])),_:1},8,["onClick"])])])),default:(0,l.w5)((()=>[(0,l.Wm)(g,{rules:t.ruleInline,ref:"dataForm",model:t.formBase,"label-position":"left","label-width":"120px",style:{width:"400px","margin-left":"120px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{label:e.$t("table.username"),prop:"username"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{modelValue:t.formBase.username,"onUpdate:modelValue":a[0]||(a[0]=e=>t.formBase.username=e)},null,8,["modelValue"])])),_:1},8,["label"]),(0,l.Wm)(m,{label:e.$t("table.email"),prop:"email"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{modelValue:t.formBase.email,"onUpdate:modelValue":a[1]||(a[1]=e=>t.formBase.email=e)},null,8,["modelValue"])])),_:1},8,["label"]),void 0!=t.formBase.password?((0,l.wg)(),(0,l.j4)(m,{key:0,label:e.$t("table.paddword"),prop:"password"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{modelValue:t.formBase.password,"onUpdate:modelValue":a[2]||(a[2]=e=>t.formBase.password=e)},null,8,["modelValue"])])),_:1},8,["label"])):(0,l.kq)("",!0),(0,l.Wm)(m,{label:e.$t("table.role"),prop:"role"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{modelValue:t.formBase.role,"onUpdate:modelValue":a[3]||(a[3]=e=>t.formBase.role=e)},null,8,["modelValue"])])),_:1},8,["label"]),(0,l.Wm)(m,{label:e.$t("table.permissionUser"),prop:"permission_group_id"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{class:"filter-item",modelValue:t.formBase.permission_group_id,"onUpdate:modelValue":a[4]||(a[4]=e=>t.formBase.permission_group_id=e)},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.PermissionGroupsList,(e=>((0,l.wg)(),(0,l.j4)(p,{value:e.id,key:e.key,label:e.title},null,8,["value","label"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["label"]),(0,l.Wm)(m,{label:e.$t("table.phone"),prop:"phone"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{modelValue:t.formBase.phone,"onUpdate:modelValue":a[5]||(a[5]=e=>t.formBase.phone=e)},null,8,["modelValue"])])),_:1},8,["label"]),(0,l.Wm)(m,{label:e.$t("table.introduction")},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"Please input",modelValue:t.formBase.introduction,"onUpdate:modelValue":a[6]||(a[6]=e=>t.formBase.introduction=e)},null,8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["rules","model"])])),_:1},8,["title","modelValue"])])}var n=t(19471),d=t(59790),u={name:"usersAdd",props:["text","pageTitle","PermissionGroupsList","formBase","ruleInline"],data(){return{dialogFormVisible:!1}},computed:{},methods:{dialogFormV(){this.dialogFormVisible=!0},dialogFormH(){this.dialogFormVisible=!1},handleClose(){(0,n.Qy)(this,"handleCloseModal")},createData(){this.$refs.dataForm.validate((e=>{if(e){(0,n.Qy)(this,"handleCloseModal");const e={...this.formBase};this.formBase.id?(0,d.Vx)(e).then((()=>{(0,n.Qy)(this,"newDataes",this.formBase)})):(0,d.IH)(this.formBase).then((()=>{(0,n.Qy)(this,"newDataes",this.formBase)}))}else this.$Message.error("*号为必填项!")}))}},mounted:function(){},created(){},updated:function(){},emits:["newDataes","handleCloseModal"]},m=t(40089);const p=(0,m.Z)(u,[["render",o]]);var h=p},36773:function(e,a,t){t.r(a),t.d(a,{default:function(){return _}});var l=t(73396),r=t(49242),s=t(87139);const i={class:"dashboard-container"},o={class:"app-container"},n={class:"filter-container"},d={class:"pagination"};function u(e,a,t,u,m,p){const h=(0,l.up)("el-input"),g=(0,l.up)("el-button"),c=(0,l.up)("el-form-item"),f=(0,l.up)("el-form"),w=(0,l.up)("el-alert"),b=(0,l.up)("el-table-column"),_=(0,l.up)("el-table"),C=(0,l.up)("PageTool"),P=(0,l.up)("el-card"),y=(0,l.Q2)("loading");return(0,l.wg)(),(0,l.iD)("div",i,[(0,l._)("div",o,[(0,l.Wm)(P,{shadow:"never"},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{model:m.requestParameters,ref:"requestParameters"},{default:(0,l.w5)((()=>[(0,l._)("div",n,[(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(h,{onKeyup:(0,r.D2)(p.handleFilter,["enter"]),style:{width:"200px"},placeholder:e.$t("table.search"),class:"filter-item",modelValue:m.requestParameters.username,"onUpdate:modelValue":a[0]||(a[0]=e=>m.requestParameters.username=e)},null,8,["onKeyup","placeholder","modelValue"]),(0,l.Wm)(g,{class:"filter-item",size:"small",type:"primary",icon:m.ElIconSearch,onClick:p.handleFilter},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(e.$t("table.search")),1)])),_:1},8,["icon","onClick"]),(0,l.Wm)(g,{class:"filter-item",size:"small",type:"primary",onClick:p.resetForm},{default:(0,l.w5)((()=>[(0,l.Uk)("重置")])),_:1},8,["onClick"])])),_:1}),(0,l.Wm)(g,{class:"filter-item fr",size:"small",style:{"margin-left":"10px"},onClick:p.handleCreate,type:"primary",icon:m.ElIconEdit},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(e.$t("table.addUser")),1)])),_:1},8,["onClick","icon"])])])),_:1},8,["model"]),""!==m.alertText?((0,l.wg)(),(0,l.j4)(w,{key:0,title:m.alertText,type:"info",class:"alert",closable:!1,"show-icon":""},null,8,["title"])):(0,l.kq)("",!0),(0,l.wy)(((0,l.wg)(),(0,l.j4)(_,{key:m.tableKey,data:m.dataList,"row-class-name":p.rowClassStatus,"element-loading-text":"给我一点时间",fit:"","highlight-current-row":"",style:{width:"100%"},border:""},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{align:"center",label:e.$t("table.id")},{default:(0,l.w5)((e=>[(0,l._)("span",null,(0,s.zw)(e.row.id),1)])),_:1},8,["label"]),(0,l.Wm)(b,{align:"center",label:e.$t("table.email")},{default:(0,l.w5)((e=>[(0,l._)("span",null,(0,s.zw)(e.row.email),1)])),_:1},8,["label"]),(0,l.Wm)(b,{label:e.$t("table.phone")},{default:(0,l.w5)((e=>[(0,l._)("span",null,(0,s.zw)(e.row.phone),1)])),_:1},8,["label"]),(0,l.Wm)(b,{align:"center",label:e.$t("table.username")},{default:(0,l.w5)((e=>[(0,l._)("span",null,(0,s.zw)(e.row.username),1)])),_:1},8,["label"]),(0,l.Wm)(b,{align:"center",label:e.$t("table.permissionUser")},{default:(0,l.w5)((e=>[(0,l._)("span",null,(0,s.zw)(e.row.permission_group_title),1)])),_:1},8,["label"]),(0,l.Wm)(b,{align:"center",label:e.$t("table.role")},{default:(0,l.w5)((e=>[(0,l._)("span",null,(0,s.zw)(e.row.role),1)])),_:1},8,["label"]),(0,l.Wm)(b,{align:"center",label:e.$t("table.actions"),"class-name":"small-padding fixed-width"},{default:(0,l.w5)((a=>[(0,l.Wm)(g,{type:"primary",size:"mini",onClick:e=>p.handleUpdate(a.row.id)},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(e.$t("table.edit")),1)])),_:2},1032,["onClick"]),"deleted"!=a.row.status?((0,l.wg)(),(0,l.j4)(g,{key:0,size:"mini",type:"danger",onClick:e=>p.removeUser(a.row.id)},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(e.$t("table.delete")),1)])),_:2},1032,["onClick"])):(0,l.kq)("",!0)])),_:1},8,["label"])])),_:1},8,["data","row-class-name"])),[[y,m.listLoading]]),(0,l._)("div",d,[(0,l.Wm)(C,{paginationPage:m.requestParameters.page,paginationPagesize:m.requestParameters.pagesize,total:m.total,onPageChange:p.handleCurrentChange,onPageSizeChange:p.handleSizeChange},null,8,["paginationPage","paginationPagesize","total","onPageChange","onPageSizeChange"])]),((0,l.wg)(),(0,l.j4)((0,l.LL)(m.UserAdd),{ref:"editUser",formData:m.requestParameters,"onUpdate:formData":a[1]||(a[1]=e=>m.requestParameters=e),text:m.text,pageTitle:m.pageTitle,formBase:m.formData,ruleInline:m.ruleInline,PermissionGroupsList:m.PermissionGroupsList,onNewDataes:p.handleLoadDataList,onHandleCloseModal:p.handleCloseModal},null,40,["formData","text","pageTitle","formBase","ruleInline","PermissionGroupsList","onNewDataes","onHandleCloseModal"]))])),_:1})])])}var m=t(72748),p=t(8720),h=t(59790),g=t(8979),c=t(51214),f={data(){return{UserAdd:"userAdd",pageTitle:"用户",text:"",tableKey:0,deletedDate:!1,showDate:!0,dataList:[],PermissionGroupsList:[],total:null,listLoading:!0,dialogStatus:"",alertText:"",requestParameters:{page:1,pagesize:10},formData:{email:"",phone:"",username:"",password:"",role:"",permission_group_id:"",permission_group_title:"",avatar:"",introduction:""},ruleInline:{username:[{required:!0,message:"用户名不能为空",trigger:"blur"}],email:[{required:!0,message:"邮箱不能为空",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}]},ElIconSearch:m.Search,ElIconEdit:m.Edit}},name:"base-users",components:{UserAdd:c["default"],PageTool:g["default"]},computed:{},methods:{getList(e){this.listLoading=!0,(0,h.pb)(this.requestParameters).then((e=>{this.dataList=e.data.list,this.total=e.data.counts,this.alertText=`共 ${this.total} 条记录`,this.listLoading=!1})).catch((e=>{this.$message.e("错了哦，这是一条错误消息")}))},setupData(){(0,p.lC)().then((e=>{this.PermissionGroupsList=e.data}))},resetForm(){this.$refs.requestParameters.resetFields()},handleFilter(){this.requestParameters.page=1,this.getList(this.requestParameters)},handleSizeChange(e){this.requestParameters.pagesize=e,1===this.requestParameters.page&&this.getList(this.requestParameters)},handleCurrentChange(e){this.requestParameters.page=e,this.getList()},handleLoadDataList(){this.getList()},rowClassStatus(e){return 1===e.row.is_deleted?(this.deletedDate=!0,this.showDate=!1,"disabled"):""},query(){this.formData={email:"",phone:"",username:"",role:"",password:"",permission_group_id:"",avatar:"",introduction:""}},handleCreate(){this.query(),this.text="创建",this.$refs.editUser.dialogFormV(),this.setupData()},handleCloseModal(){this.$refs.editUser.dialogFormH()},hanldeEditForm(e){this.formData.id=e,this.setupData(),(0,h.lA)({id:e}).then(((e,a)=>{const t=e.data;if(a)return a;this.formData.id=t.id,this.formData.email=t.email,this.formData.phone=t.phone,this.formData.username=t.username,this.formData.role=t.role,this.formData.password=t.password,this.formData.avatar=t.avatar,this.formData.introduction=t.introduction,this.formData.permission_group_id=t.permission_group_id,this.formData.permission_group_title=t.permission_group_title}))},handleUpdate(e){this.query();const a=this;this.text="编辑",this.$refs.editUser.dialogFormV(),a.hanldeEditForm(e)},removeUser(e){this.$confirm("此操作将永久删除用户 , 是否继续?","提示",{type:"warning"}).then((()=>{(0,h.Od)({id:e}).then((a=>{this.$message.success("成功删除了用户!"),this.dataList.splice(e,1),this.getList(this.requestParameters)})).catch((e=>{this.$message.error("删除失败!")}))})).catch((()=>{this.$message.info("已取消操作!")}))}},mounted:function(){},created(){this.getList();const e=this;document.onkeydown=function(a){const t=window.event.keyCode;13===t&&e.handleFilter(this.requestParameters)}},updated:function(){}},w=t(40089);const b=(0,w.Z)(f,[["render",u],["__scopeId","data-v-bc471f5a"]]);var _=b}}]);
//# sourceMappingURL=773.e2f14310.js.map