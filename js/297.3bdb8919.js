"use strict";(self["webpackChunkhmmm_frontend_vue3_dev"]=self["webpackChunkhmmm_frontend_vue3_dev"]||[]).push([[297],{8720:function(e,t,i){i.d(t,{IH:function(){return s},Od:function(){return n},Vx:function(){return r},lA:function(){return d},lC:function(){return o},pb:function(){return l}});var a=i(84471);const l=e=>(0,a.r)("/permissions","get",e),o=e=>(0,a.r)("/permissions/simple","get",e),s=e=>(0,a.r)("/permissions","post",e),r=e=>(0,a.r)(`/permissions/${e.id}`,"put",e),n=e=>(0,a.r)(`/permissions/${e.id}`,"delete",e),d=e=>(0,a.r)(`/permissions/${e.id}`,"get",e)},78297:function(e,t,i){i.r(t),i.d(t,{default:function(){return h}});var a=i(73396),l=i(87139);const o={class:"add-form"},s={class:"dialog-footer"};function r(e,t,i,r,n,d){const u=(0,a.up)("el-input"),m=(0,a.up)("el-form-item"),p=(0,a.up)("el-tree"),f=(0,a.up)("el-form"),h=(0,a.up)("el-button"),c=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.iD)("div",o,[(0,a.Wm)(c,{title:i.apiTitle,modelValue:n.dialogFormVisible,"onUpdate:modelValue":t[2]||(t[2]=e=>n.dialogFormVisible=e)},{footer:(0,a.w5)((()=>[(0,a._)("div",s,[(0,a.Wm)(h,{onClick:d.handleClose},{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(e.$t("table.signOut")),1)])),_:1},8,["onClick"]),(0,a.Wm)(h,{type:"primary",onClick:t[1]||(t[1]=e=>d.handleSave("formBase"))},{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(e.$t("table.preserve")),1)])),_:1})])])),default:(0,a.w5)((()=>[(0,a.Wm)(f,{rules:i.ruleInline,ref:"dataForm",model:n.formBase,"label-position":"left","label-width":"120px",style:{width:"400px","margin-left":"120px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{label:e.$t("table.powerTitle"),prop:"title"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:n.formBase.title,"onUpdate:modelValue":t[0]||(t[0]=e=>n.formBase.title=e)},null,8,["modelValue"])])),_:1},8,["label"]),(0,a.Wm)(m,{label:e.$t("table.powerDistriB")},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{ref:"treeMenu",data:d.treeData,"show-checkbox":"","node-key":"id","default-expanded-keys":[0],props:n.defaultProps,onCheckChange:d.handleCheckChange},null,8,["data","props","onCheckChange"])])),_:1},8,["label"])])),_:1},8,["rules","model"])])),_:1},8,["title","modelValue"])])}i(57658);var n=i(19471),d=(i(8720),i(5917));let u=[];var m={name:"PermissionGroupsApiAdd",props:["apiTitle","ruleInline"],data(){return{dialogFormVisible:!1,PermissionGroupsmenu:[],defaultProps:{label:"title"},formBase:{id:0,title:"",apis:[]},PermissionApiData:[],checkedData:[]}},computed:{treeData(){const e=this.PermissionApiData;if(null!==u&&u.formBase.apis.length>0){const t=u.formBase.apis.map((e=>e));t.map((t=>{e.filter((e=>{e.id===t&&(e.checked=!0)}))}))}return e}},methods:{dialogFormV(){this.dialogFormVisible=!0},dialogFormH(){this.dialogFormVisible=!1},handleClose(){(0,n.Qy)(this,"handleCloseModal")},handleCheckChange(e){const t=[];t.push(e)},loadApiPermissionData(){(0,d.pb)().then(((e,t)=>{if(t)return t;u.PermissionApiData=e.data}))},hanldeEditApiForm(e){this.formBase.id=e,details({id:e}).then(((e,t)=>{if(t)return t;this.formBase.id=e.data.id,this.formBase.title=e.data.title})),u.loadApiPermissionData(),apiread({id:e}).then(((e,t)=>{if(t)return t;this.formBase.apis=e.data.apis}))},handleSave(e){const t=[];for(const i of u.checkedData)t.push(i.id);this.$refs[e].validate((e=>{e?((0,n.Qy)(this,"handleCloseModal"),apiadd({id:u.formBase.id,apis:t}).then(((e,t)=>{if(t)return t;(0,n.Qy)(this,"newDataes",this.formBase)}))):this.$Message.error("*号为必填项!")}))}},mounted:function(){},created(){u=this},updated:function(){},emits:["newDataes","handleCloseModal"]},p=i(40089);const f=(0,p.Z)(m,[["render",r]]);var h=f}}]);
//# sourceMappingURL=297.3bdb8919.js.map